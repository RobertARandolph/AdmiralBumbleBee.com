I"É4  <video autoplay loop muted class="gifvid">
    <source src="/assets/Reaper/Click/Click.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>
  <div class="video-caption">A real click track in Reaper</div>

<p>I like to have a real click <strong>track</strong> in my project. That means that I want have a <strong>track</strong> with the click that I can put on effects or use as a sidechain source. I don‚Äôt want a phantom click source that just plays when the project plays. I want a track.</p>

<p>Reaper allows you to do this, but if you want a button on your toolbar to control that track then you gotta write a script or two to make that work. So that‚Äôs what I‚Äôve done.</p>

<p>Click through to see how I setup a <em>real</em> click track, with effects, and a toolbar button that controls it.</p>

<!--more-->

<h1 class="no_toc" id="contents">Contents</h1>
<ul id="markdown-toc">
  <li><a href="#make-a-click-track" id="markdown-toc-make-a-click-track">Make a click track</a></li>
  <li><a href="#adjust-the-click-track" id="markdown-toc-adjust-the-click-track">Adjust the click track</a>    <ul>
      <li><a href="#bonus-tricks-1---compress" id="markdown-toc-bonus-tricks-1---compress">Bonus tricks #1 - Compress</a></li>
      <li><a href="#bonus-trick-2---delay" id="markdown-toc-bonus-trick-2---delay">Bonus Trick #2 - Delay</a></li>
    </ul>
  </li>
  <li><a href="#setup-the-scripts" id="markdown-toc-setup-the-scripts">Setup the scripts</a>    <ul>
      <li><a href="#toggle-script" id="markdown-toc-toggle-script">Toggle script</a></li>
      <li><a href="#monitor-script" id="markdown-toc-monitor-script">Monitor script</a>        <ul>
          <li><a href="#startup" id="markdown-toc-startup">Startup!</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#conclusion" id="markdown-toc-conclusion">Conclusion</a></li>
  <li><a href="#support-me" id="markdown-toc-support-me">Support Me!</a></li>
</ul>

<h1 id="make-a-click-track">Make a click track</h1>

  <img src="/assets/Reaper/Click/InsertClick.png" alt="Insert click source">
  <div class="image-caption">Insert a click source</div>

<p>The first step is to create a click track.</p>

<ul>
  <li>Create a new track</li>
  <li>Select track</li>
  <li>Insert-&gt;Click Source (or action ‚ÄúInsert click source‚Äù (40013))</li>
  <li>Turn off the click in the project</li>
</ul>

<p>This places a click media item on the track that follows all changes in the project.</p>

<h1 id="adjust-the-click-track">Adjust the click track</h1>

  <img src="/assets/Reaper/Click/ClickProp.png" alt="Adjust the click settings">
  <div class="image-caption">Adjust the click settings</div>

<p>The project click settings do not affect your click track. To adjust the click sound you need to use the ‚Äòsource properties‚Äô dialog. This can be accessed by right clicking the click source, or ctrl-F2 by default.</p>

<h2 id="bonus-tricks-1---compress">Bonus tricks #1 - Compress</h2>

  <img src="/assets/Reaper/Click/Transient.png" alt="Click compress">
  <div class="image-caption">Transient controller to bring out the attack</div>

<p>I like to have a compressor on my click sound. It is not always turned on, but frequently it‚Äôs useful to compress the click and slowly open up the attack parameter so that the click has a sharper transient.</p>

<p>The sharper transient helps the click get through when a musician is playing a washy or splashy part. If you find that someone seems to keep losing the beat in a particular part that has a lot of washiness, try it.</p>

<p><strong>Alternative</strong> - Use JS: Transient Controller like have pictured</p>

<h2 id="bonus-trick-2---delay">Bonus Trick #2 - Delay</h2>

  <img src="/assets/Reaper/Click/Delay.png" alt="Delay!">
  <div class="image-caption">Delay to sub-divide on demand</div>

<p>Putting a delay on the click is a very fast way to add sub-divisions. If you need to sub-divide down, rather than editing the click source properties you can simply add a ReaDelay. Set the delay taps to your desired sub-division and you‚Äôre good to go.</p>

<p>I have multiple ReaDelays setup and bypassed on my click source. Each one corresponds to different sub-divisions.</p>

<p>The beauty of this method is that you can <em>automate</em> the ReaDelays parameters and bypass. You can quickly setup the click to have 8ths in one part, 16ths in another and quarters in yet another section.</p>

<p><strong>Note</strong> - This can sound strange if you have accents. I actually have <em>two</em> click tracks, one with accents and one without. I only have the ReaDelays on the unaccented one to sub-divide. If you do this then you do not need to modify the scripts below, simply put the 2 clicks in a folder track that is the first track in the project.</p>

<p>To turn off the first accented beat, set the frequency to 0. You can‚Äôt use the ‚ÄòPrimary Beat Volume‚Äô Parameter.</p>

<h1 id="setup-the-scripts">Setup the scripts</h1>

  <img src="/assets/Reaper/Click/Scripts.png" alt="Scripts">
  <div class="image-caption">The scripts that you need</div>

<p>Having to constantly find and mute your click track is annoying. It‚Äôs much easier to have a toolbar button that corresponds to your click track being muted or not.</p>

<p>To set this up you need to add 2 scripts to Reaper, and have <a href="http://www.sws-extension.org">SWS</a> installed.</p>

<h2 id="toggle-script">Toggle script</h2>

<p>The first script is what you assign to your toolbar button. This script sets the track to be the <em>opposite</em> of the toolbar button state.</p>

<p>When the button is ON, your track is un-muted. When the button is OFF, your track is muted.</p>

<p><strong>Important</strong> - This script assumes that your click track is the <em>first</em> track in the project. This can be modified to find the track by name, but that‚Äôs just way slower. If you need that then let me know and I will offer an alternative.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="n">reaper</span><span class="p">.</span><span class="n">Undo_BeginBlock</span><span class="p">()</span>
  <span class="n">is_new_value</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">sec</span><span class="p">,</span> <span class="n">cmd</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">resolution</span><span class="p">,</span> <span class="n">val</span> <span class="o">=</span> <span class="n">reaper</span><span class="p">.</span><span class="n">get_action_context</span><span class="p">()</span>
  <span class="n">state</span> <span class="o">=</span> <span class="n">reaper</span><span class="p">.</span><span class="n">GetToggleCommandStateEx</span><span class="p">(</span> <span class="n">sec</span><span class="p">,</span> <span class="n">cmd</span> <span class="p">)</span>
  
  <span class="c1">-- must set track first or the deferred script gets in the way! (why? that's kinda stupid)</span>
  <span class="n">track</span> <span class="o">=</span> <span class="n">reaper</span><span class="p">.</span><span class="n">GetTrack</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
  <span class="n">reaper</span><span class="p">.</span><span class="n">SetMediaTrackInfo_Value</span><span class="p">(</span><span class="n">track</span><span class="p">,</span> <span class="s1">'B_MUTE'</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span> <span class="c1">-- opposite of the command state</span>
        
  <span class="n">reaper</span><span class="p">.</span><span class="n">SetToggleCommandState</span><span class="p">(</span> <span class="n">sec</span><span class="p">,</span> <span class="n">cmd</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">state</span><span class="p">))</span> <span class="c1">-- Toggle</span>
  <span class="n">reaper</span><span class="p">.</span><span class="n">RefreshToolbar2</span><span class="p">(</span> <span class="n">sec</span><span class="p">,</span> <span class="n">cmd</span> <span class="p">)</span>
<span class="n">reaper</span><span class="p">.</span><span class="n">Undo_EndBlock</span><span class="p">(</span><span class="s2">"Toggle Metronome Mute"</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>I have this script named as ‚ÄúScript: ToggleMetronomeTrack.lua‚Äù</p>

<h2 id="monitor-script">Monitor script</h2>

<p>Now you may be wondering, ‚ÄúGreat! It works if I click the button, but what if I mute the track itself somehow?!‚Äù Right, the toolbar has no way of knowing when the track is muted by something other than the toolbar!</p>

<p>The following script fixes that.</p>

<p><strong>Important</strong> - Make sure the ‚ÄúNamedCommandLookup‚Äù function refers to the command ID of your <a href="#toggle-script">toggle script</a>. It may be different than the command id I have in my script.</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="k">function</span> <span class="nf">main</span><span class="p">()</span>
  
  <span class="n">track</span> <span class="o">=</span> <span class="n">reaper</span><span class="p">.</span><span class="n">GetTrack</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
  <span class="n">mute_state</span> <span class="o">=</span> <span class="n">reaper</span><span class="p">.</span><span class="n">GetMediaTrackInfo_Value</span><span class="p">(</span><span class="n">track</span><span class="p">,</span> <span class="s1">'B_MUTE'</span><span class="p">,</span> <span class="n">new_state</span><span class="p">)</span>
  <span class="n">cmd</span> <span class="o">=</span> <span class="n">reaper</span><span class="p">.</span><span class="n">NamedCommandLookup</span><span class="p">(</span><span class="s2">"_RS35338bf5bacea555636e5b284fd2bf346e254914"</span><span class="p">)</span>
  <span class="n">reaper</span><span class="p">.</span><span class="n">SetToggleCommandState</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="n">cmd</span><span class="p">,</span> <span class="p">((</span><span class="n">mute_state</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="mi">0</span> <span class="ow">or</span> <span class="mi">1</span><span class="p">))</span>

  <span class="n">reaper</span><span class="p">.</span><span class="n">defer</span><span class="p">(</span> <span class="n">main</span> <span class="p">)</span>
  
<span class="k">end</span>

<span class="c1">-- RUN</span>
<span class="n">main</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="startup">Startup!</h3>

  <img src="/assets/Reaper/Click/ProjectStartup.png" alt="SWS Startup">
  <div class="image-caption">SWS Startup actions are needed</div>

<p>The <a href="#monitor-script">monitor script</a> must be turned on every time that Reaper starts. It runs one time then is constantly running in the background to check on things (but only when Reaper says it‚Äôs ok and won‚Äôt mess up your project!)</p>

<p>SWS has a feature called ‚ÄúStartup Actions‚Äù that lets you run commands when Reaper starts, and/or when a specific project is opened.</p>

<p>If you already have a startup action, then create a new Custom Action with your current startup action and the metronome toggle script. Now use that custom action as your Startup Action.</p>

<h1 id="conclusion">Conclusion</h1>

<p>That‚Äôs it! Now you have a real click track. The track has a toolbar that controls it and updates to reflect the on/off state.</p>

<p>Not very difficult, but very useful.</p>

<h1 id="support-me">Support Me!</h1>

<p>This post took 4 hours to research, photograph, write and edit. If you appreciate the information presented then <a href="/DonateNow/">please consider joining patreon or donating!</a></p>

<p><a href="https://www.patreon.com/bePatron?u=7465992"> <img class="patreon-button" src="/assets/Patreon.png" alt="Be a Patreon!" /></a></p>

<form style="text-align: center;" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick" />
<input type="hidden" name="hosted_button_id" value="BR247JAZBTUJJ" />
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!" />
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1" />
</form>

<p>If you have any questions or comments, please comment below! I read every comment and respond to most.</p>

:ET