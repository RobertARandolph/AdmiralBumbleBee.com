I"˛<p><a href="/assets/DPLatency/hookup.jpg"><img src="/assets/DPLatency/Thumbnails/hookup.jpg" alt="The hookups" /></a></p>

<p>Recently <a href="http://motu.com/newsitems/digital-performer-91-is-now-shipping">MOTU released Digital Performer 9.1</a> and one of the major enhances was advertised to be reduced latency in OS X with ‚Äúindustry-leading overall latency performance.‚Äù</p>

<p>I was very skeptical of this. There‚Äôs certain physical realities that can‚Äôt be overcome without some sort of misadvertising. So what do we do? We test it!</p>

<!--more-->

<h1 class="no_toc" id="contents">Contents</h1>
<ul id="markdown-toc">
  <li><a href="#pre-requisite-information" id="markdown-toc-pre-requisite-information">Pre-requisite information</a></li>
  <li><a href="#the-setup" id="markdown-toc-the-setup">The Setup</a></li>
  <li><a href="#the-measurement" id="markdown-toc-the-measurement">The measurement</a></li>
  <li><a href="#the-results" id="markdown-toc-the-results">The results</a></li>
  <li><a href="#interpretations" id="markdown-toc-interpretations">Interpretations</a></li>
  <li><a href="#conclusion" id="markdown-toc-conclusion">Conclusion</a></li>
  <li><a href="#support-me" id="markdown-toc-support-me">Support me!</a></li>
</ul>

<h1 id="pre-requisite-information">Pre-requisite information</h1>

<p>First we have to understand that modern software moves audio around in what we call buffers. These are chunks of samples, and a reference to that chunk of data‚Äôs location in memory is passed around the software. We‚Äôll use 128 samples for this discussion.</p>

<p>So this whole time our audio is MOVING. 44,100 samples (in this example) need to come out of the speakers per second. If we want to do something with that 128 sample buffer, we have about ~2.9ms (128 / 44100) * 1000) before we need to send the 129-256th sample buffer.</p>

<p>We need to both fill this buffer (take it off disc, generate sound, whatever), and empty the buffer (send it to the audio device for DA). So there‚Äôs going to be 2 full buffers worth of time that need to pass before we can hear what happened.</p>

<p>128 samples filled. That takes 2.9ms
128 samples dumped. That takes 2.9ms.</p>

<p>So in this example anything that happens will take ~5.8ms at minimum before we can hear it.</p>

<p>On top of that latency, our hardware also has to convert audio to digital, and digital to audio. Due to the processes necessary for that, the hardware will usually penalize us with from 2-10ms of extra latency that is fixed.</p>

<h1 id="the-setup">The Setup</h1>

<p><a href="/assets/DPLatency/hookup.jpg"><img src="/assets/DPLatency/Thumbnails/graph.png" alt="A graph to help understand" /></a></p>

<p>So to test what the latency of DP is, all we really need to do is send audio from in-&gt;out and measure the distance in time between them. That is called ‚ÄúRound Trip Latency‚Äù, or RTL for short. This operation is commutative, meaning we can also test it by measuring out-&gt;in.</p>

<p>So the idea is to play a sound, capture that sound (a), have it run through the interface, back out and capture that sound (b). The time difference (delta) between A and B is our RTL.</p>

<p>In the graph you can see the routing setup. (Note the in/out numbers used are arbitrary. It‚Äôs what was available and easy for me at the time)</p>

<ul>
  <li>We play a click sound from the DAW. Easy to recognize transients make this ideal material. This is output to Out 1</li>
  <li>Out 1 is routed to Input 8. We tap line line here with a scope probe. This gives us our reference signal.</li>
  <li>The audio goes through the DAW with a track set to Input 8. The track has realtime monitoring on and outputs to Out 6.</li>
  <li>We capture the audio from Out 6. This is the point where the loop terminates for us.</li>
</ul>

<p>Note: There isn‚Äôt a true loop happening. The audio does not pass through the scope and back to Input 8. I just suck at drawing stuff sometimes.</p>

<h1 id="the-measurement">The measurement</h1>

<p>The oscilloscope has a function which allows one to display 2 signals and put a cursor on a point (a), then another cursor on another point (b).</p>

<p>Then you can simply take the delta of these cursors, or the difference. The difference in time between these 2 signals is the true total throughput latency of the interface, plus the hardware.</p>

<h1 id="the-results">The results</h1>

<p>With a 44.1khz sampling rate and a 64 sample buffer, I ran this test 3 times with various DAWS. Here are the results.</p>

<ul>
  <li>DP 9.02 = 10.2ms</li>
  <li>DP 9.1 = 7.32ms</li>
  <li>Studio One = 7.32ms (8.64ms predicted)</li>
  <li>Cubase = 7.32ms (6.46ms predicted</li>
  <li>Logic = 7.32ms (6.5ms predicted)</li>
  <li>Tracktion = 7.32ms (1.5ms predicted‚Ä¶  optimistic aren‚Äôt we?)</li>
  <li>Ableton Live = 7.32ms (6.46ms predicted)</li>
</ul>

<p>Most DAW‚Äôs have a small text near the buffer setting that tells you what the expected total RTL is. The DAW polls the hardware to see what it reports as its total latency and adds that to the DAW‚Äôs own predicted latency.</p>

<h1 id="interpretations">Interpretations</h1>

<p>To determine the amount of time that passes during a single buffer cycle we use the following formula: ((rate / 1000) / buffer-size). For a 64 sample buffer at 44.1khz, that gives us 1.4512471655ms for each buffer.</p>

<p>Ideally a DAW only causes 2 buffers of latency. One on the input and output stage. This gives us very close to 2.9ms of latency theoretically. The remaining latency is caused by the hardware‚Äôs various stages of conversion, mixing, protocol latency etc.. If we take the most commonly reported total latency, 7.32, we can subtract our total theoretical latency. This yeilds a hardware latency of 4.42ms.</p>

<p>Every DAW except DP 9.02 gives the same total latency. So what is happening with DP 9.02?</p>

<p>First we subtract our known hardware latency of 4.42ms. 10.2 - 4.42 = 5.78. That‚Äôs a total of 5.78ms latency being caused by DP 9.02.</p>

<p>If you‚Äôre fairly keen, you will notice that 2.9*2 = 5.8. That‚Äôs just about 4 total buffers! This would imply that DP 9.02 was using 4 total buffers for I/O instead of the bare minimum of 2 that every DAW I tested was using.</p>

<h1 id="conclusion">Conclusion</h1>

<p>DP 9.02 was broken or very poorly designed.</p>

<p>DP 9.1 <strong><em>does not</em></strong> offer industry leading latency. It simply is now on par with every other DAW.</p>

<h1 id="support-me">Support me!</h1>

<p>If you appreciate the information presented then <a href="/DonateNow/">please consider joining patreon or donating!</a></p>

<p><a href="https://www.patreon.com/bePatron?u=7465992"> <img class="patreon-button" src="/assets/Patreon.png" alt="Be a Patreon!" /></a></p>

<form style="text-align: center;" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick" />
<input type="hidden" name="hosted_button_id" value="BR247JAZBTUJJ" />
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!" />
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1" />
</form>

<p>If you have any questions or comments, please comment below! I read every comment and respond to most.</p>
:ET