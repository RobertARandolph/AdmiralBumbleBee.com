I"û  <img src="/assets/Reaper/RatetoPitch.png" alt="Rate to Pitch">
  <div class="image-caption">Rate to Pitch and Preserve</div>

<p>Sometimes in a project you may have some items with</p>

<ul>
  <li>â€œPreserve pitch when changing rateâ€ off, so that you can stretch them and change the pitch.</li>
  <li>â€œPreserve pitch when changing rateâ€ on so that you can stretch the item and <strong>not</strong> change the pitch.</li>
  <li>Pitch changes via the â€œPitch Adjustâ€ parameter.</li>
</ul>

<p>The following script consolidates the selected items so they retain their length and pitch, but with â€œPreserve pitch when changing rateâ€ on.</p>

<p>It does this by finding items with â€œPreserve pitch when changing rateâ€ off, then it translates the rate to pitch, assigns that to the pitch value and turns on â€œPreserve pitch when changing rateâ€.</p>

<p><a href="https://soundcloud.com/canopy_music"><strong>Thanks to Canopy for the idea</strong></a> <strong>EDIT</strong>: 17th of March - and he corrected the script to work with non-rate pitch-based offset.</p>

<!--more-->

<h1 id="the-script">The Script</h1>

<p>The following code is the script. You can either create a new script via the actions window and drop this in it, or <a href="/assets/Reaper/Scripts/RatetoPitchandPreserve.lua">download from here</a>.</p>

<p>To find the location of where to put this:</p>

<ul>
  <li>Open Reaper</li>
  <li>Options menu-&gt;Show RESOURCE path in explorer/finder</li>
  <li>Open the â€œScriptsâ€ folder</li>
  <li>Create a new folder (â€˜AdmiralBumbleBeeâ€™ if you wish)</li>
  <li>Place this file in it</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre></td><td class="rouge-code"><pre>selected_items_count = reaper.CountSelectedMediaItems(0)

reaper.Undo_BeginBlock()

-- INITIALIZE loop through selected items
for i = 0, selected_items_count-1  do
  item = reaper.GetSelectedMediaItem(0, i) -- Get selected item i

  take = reaper.GetActiveTake(item)

  preserve = reaper.GetMediaItemTakeInfo_Value(take ,"B_PPITCH")

  if preserve == 0 then
    
    oldpitch = reaper.GetMediaItemTakeInfo_Value(take, "D_PITCH")
    rate = reaper.GetMediaItemTakeInfo_Value(take, "D_PLAYRATE")
    newRate = 1
    newPitch = (((12/math.log(2)) * math.log(rate)) + oldpitch)
    reaper.SetMediaItemTakeInfo_Value(take, "D_PITCH", newPitch)
    reaper.SetMediaItemTakeInfo_Value(take, "B_PPITCH", 1)

  end

end -- ENDLOOP through selected items

reaper.Undo_EndBlock("Change Rates to Pitch and Preserve Pitch", -1)
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="special-thanks">Special Thanks</h1>

<p>Thank you to Elan Hickler for the pitch/rate scripts <a href="https://github.com/ReaTeam/ReaScripts/tree/master/Takes%20Properties">HERE</a>, and <a href="https://www.extremraym.com/en/">ExtremRaym</a>.</p>

<p>I borrowed some ideas from these resources to cobble this together.</p>

<h1 id="support-me">Support Me!</h1>

<p>This script took only 15 minutes to write. If you appreciate the information presented then <a href="/DonateNow/">please consider joining patreon or donating!</a></p>

<p><a href="https://www.patreon.com/bePatron?u=7465992"> <img class="patreon-button" src="/assets/Patreon.png" alt="Be a Patreon!" /></a></p>

<form style="text-align: center;" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick" />
<input type="hidden" name="hosted_button_id" value="BR247JAZBTUJJ" />
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!" />
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1" />
</form>

<p>If you have any questions or comments, please comment below! I read every comment and respond to most.</p>

:ET